<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>LLM Reasoning - AllSenses AI Guardian</title>
    <link rel="stylesheet" href="assets/css/main.css">
    <link rel="stylesheet" href="assets/css/reasoning.css">
</head>
<body>
    <div class="container">
        <header class="header">
            <h1>LLM Reasoning Visualization</h1>
            <p class="subtitle">Real-time AI Decision Making Process</p>
            <nav class="nav">
                <a href="index.html" class="nav-link">‚Üê Back to Dashboard</a>
            </nav>
        </header>

        <main class="main-content">
            <!-- Real-time Reasoning Flow -->
            <section class="reasoning-flow-section">
                <h2>Live Reasoning Process</h2>
                <div class="reasoning-pipeline">
                    <div class="pipeline-stage" id="inputStage">
                        <h3>Input Processing</h3>
                        <div class="stage-content">
                            <div class="input-data">
                                <h4>Sensor Data</h4>
                                <div class="data-item">
                                    <span class="label">Audio:</span>
                                    <span class="value" id="audioInput">No data</span>
                                </div>
                                <div class="data-item">
                                    <span class="label">Motion:</span>
                                    <span class="value" id="motionInput">No data</span>
                                </div>
                                <div class="data-item">
                                    <span class="label">Location:</span>
                                    <span class="value" id="locationInput">No data</span>
                                </div>
                                <div class="data-item">
                                    <span class="label">Environment:</span>
                                    <span class="value" id="environmentInput">No data</span>
                                </div>
                            </div>
                        </div>
                    </div>

                    <div class="pipeline-stage" id="analysisStage">
                        <h3>LLM Analysis</h3>
                        <div class="stage-content">
                            <div class="llm-thinking">
                                <h4>Model Reasoning</h4>
                                <div class="thinking-bubble" id="llmThinking">
                                    Waiting for analysis...
                                </div>
                                <div class="model-info">
                                    <span class="model-name" id="modelName">AWS Bedrock Claude</span>
                                    <span class="processing-time" id="processingTime">0ms</span>
                                </div>
                            </div>
                        </div>
                    </div>

                    <div class="pipeline-stage" id="decisionStage">
                        <h3>Decision Output</h3>
                        <div class="stage-content">
                            <div class="decision-output">
                                <div class="threat-assessment">
                                    <h4>Threat Assessment</h4>
                                    <div class="threat-level" id="threatLevel">NONE</div>
                                    <div class="confidence-score">
                                        <span>Confidence:</span>
                                        <div class="confidence-bar">
                                            <div class="confidence-fill" id="confidenceFill" style="width: 0%"></div>
                                        </div>
                                        <span id="confidenceValue">0%</span>
                                    </div>
                                </div>
                                <div class="recommended-action">
                                    <h4>Recommended Action</h4>
                                    <div class="action-type" id="actionType">MONITOR</div>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </section>

            <!-- Detailed Decision Logs -->
            <section class="decision-logs-section">
                <h2>Decision History & Reasoning</h2>
                <div class="logs-controls">
                    <button id="clearLogs" class="btn btn-secondary">Clear Logs</button>
                    <button id="exportLogs" class="btn btn-primary">Export Logs</button>
                    <select id="logFilter" class="log-filter">
                        <option value="all">All Decisions</option>
                        <option value="threat">Threat Detections</option>
                        <option value="emergency">Emergency Responses</option>
                        <option value="normal">Normal Operations</option>
                    </select>
                </div>
                <div class="decision-logs" id="decisionLogs">
                    <!-- Decision logs will be populated here -->
                </div>
            </section>

            <!-- LLM Performance Metrics -->
            <section class="performance-section">
                <h2>LLM Performance Metrics</h2>
                <div class="metrics-grid">
                    <div class="metric-card">
                        <h3>Response Time</h3>
                        <div class="metric-chart">
                            <canvas id="responseTimeChart" width="200" height="100"></canvas>
                        </div>
                        <div class="metric-stats">
                            <span>Avg: <span id="avgResponseTime">0ms</span></span>
                            <span>Max: <span id="maxResponseTime">0ms</span></span>
                        </div>
                    </div>
                    
                    <div class="metric-card">
                        <h3>Confidence Distribution</h3>
                        <div class="confidence-histogram">
                            <div class="histogram-bar" data-range="0-20">
                                <div class="bar-fill" id="conf0-20"></div>
                                <span class="bar-label">0-20%</span>
                            </div>
                            <div class="histogram-bar" data-range="20-40">
                                <div class="bar-fill" id="conf20-40"></div>
                                <span class="bar-label">20-40%</span>
                            </div>
                            <div class="histogram-bar" data-range="40-60">
                                <div class="bar-fill" id="conf40-60"></div>
                                <span class="bar-label">40-60%</span>
                            </div>
                            <div class="histogram-bar" data-range="60-80">
                                <div class="bar-fill" id="conf60-80"></div>
                                <span class="bar-label">60-80%</span>
                            </div>
                            <div class="histogram-bar" data-range="80-100">
                                <div class="bar-fill" id="conf80-100"></div>
                                <span class="bar-label">80-100%</span>
                            </div>
                        </div>
                    </div>
                    
                    <div class="metric-card">
                        <h3>Decision Accuracy</h3>
                        <div class="accuracy-gauge">
                            <div class="gauge-circle">
                                <div class="gauge-fill" id="accuracyGauge"></div>
                                <div class="gauge-text">
                                    <span id="accuracyValue">95%</span>
                                    <small>Accuracy</small>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </section>

            <!-- Model Configuration -->
            <section class="model-config-section">
                <h2>LLM Model Configuration</h2>
                <div class="config-grid">
                    <div class="config-item">
                        <label>Primary Model:</label>
                        <span id="primaryModel">Claude-3 Sonnet</span>
                    </div>
                    <div class="config-item">
                        <label>Fallback Model:</label>
                        <span id="fallbackModel">Titan Text Express</span>
                    </div>
                    <div class="config-item">
                        <label>Temperature:</label>
                        <span id="temperature">0.3</span>
                    </div>
                    <div class="config-item">
                        <label>Max Tokens:</label>
                        <span id="maxTokens">1000</span>
                    </div>
                    <div class="config-item">
                        <label>Reasoning Depth:</label>
                        <span id="reasoningDepth">Multi-stage</span>
                    </div>
                    <div class="config-item">
                        <label>Context Window:</label>
                        <span id="contextWindow">100k tokens</span>
                    </div>
                </div>
            </section>
        </main>
    </div>

    <script src="assets/js/app.js"></script>
    <script src="assets/js/reasoning.js"></script>
</body>
</html>